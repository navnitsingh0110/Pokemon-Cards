<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeeksterMon</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Grandstander:wght@600&family=Roboto&display=swap');

        * {
            font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
            /* color: #555555; */
            color: #fff;
        }


        a {
            text-decoration: none;
        }

        a:hover {
            color: black;
        }

        .content-wrapper {
            display: block;
            margin: auto 5rem;
            max-height: 1700px;
            max-width: 1700px;
        }

        body {
            background-color: #5CB9FF;

        }

        h1 {
            font-family: 'Grandstander', cursive;
            text-align: center;
            font-size: 70px;
            margin-top: 45px;
            margin-bottom: 20px;
        }


        .form-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin: 20px 25px;
            background-color: #b8e8f6;
            padding: 10px;
            border-radius: 10px;
            color: #000;
            border: #4A9ACF solid 3px;
            box-shadow: 4px 4px 0 #FFD25C;

        }

        select.type-filter {
            background-color: #fff;
            color: #000;
            border: 1px solid #ccc;
            padding: 5px;
        }

        select.type-filter option {
            background-color: #f0f0f0;
            color: #333;
            padding: 5px;
        }

        select.type-filter option:hover {
            background-color: #ddd;
            color: #000;
        }


        #pokemon-type-filter,
        #pokemon-search-form {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #000;
        }

        #pokemon-search-input {
            padding: 5px 10px;
            font-size: 14px;
            border: 1px solid #ccc;
            border-radius: 5px;
            color: #000;
        }

        .type-filter,
        #pokemon-type-filter input[type="submit"],
        #pokemon-type-filter button {
            padding: 5px 10px;
            font-size: 14px;
            border: 1px solid #ccc;
            border-radius: 5px;
            cursor: pointer;
        }

        #pokemon-type-filter button {
            background-color: #f4f4f4;
        }

        #pokemon-type-filter button:hover,
        #pokemon-type-filter input[type="submit"]:hover {
            background-color: #e0e0e0;
        }


        /*  */
        #pokedex {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
        }

        .flip-card {
            margin: 20px;
            width: 200px;
            height: 275px;
            text-align: center;
            justify-content: center;
            perspective: 1000px;
            opacity: 0.95;
        }

        .flip-card-inner {
            -webkit-box-shadow: 3px 3px 5px 6px #111;
            -moz-box-shadow: 3px 3px 5px 6px #111;
            box-shadow: 3px 3px 5px 6px #111;
            border-radius: 10px;
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: 1s;
            transform-style: preserve-3d;
        }

        .flip-card:hover .flip-card-inner {
            transform: rotateY(180deg);
        }

        .front-pokemon-card,
        .back-pokemon-card {
            position: absolute;
            width: 100%;
            height: 100%;
            align-items: center;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border: 3px solid #fff;
            box-shadow: 3px 3px 5px 6px #111;
            border-radius: 10px;
        }

        .front-pokemon-card {
            z-index: 2;
            transform: rotateY(0);
        }

        .back-pokemon-card {
            transform: rotateY(180deg);
        }

        .front-pokemon-image,
        .back-pokemon-image {
            position: relative;
            top: 50px;
        }

        .front-poke-id,
        .back-poke-id {
            position: relative;
            top: -100px;
            width: 100%;
            background: linear-gradient(45deg, hsl(60, 20%, 98%), #8a8a8a, #4f4e4e);
            color: #000000;
            justify-content: left;
        }

        .front-pokemon-type {
            width: fit-content;
            padding: 4px 16px;
            background: linear-gradient(45deg, rgba(164, 172, 175, 0.6), rgba(147, 156, 158, 0.6), rgba(130, 140, 141, 0.6));
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            position: relative;
            margin: auto;
            bottom: -12.5px;
            font-size: small;
        }

        #grass {
            background: linear-gradient(45deg, #9bcc50, #7bc950, #5bae2f);
        }

        #bug {
            background: linear-gradient(45deg, #729f3f, #6b9537, #577c2e);
        }

        #fire {
            background: linear-gradient(45deg, #fd7d24, #f45b20, #e44418);
        }

        #water {
            background: linear-gradient(45deg, #4592c4, #377bb3, #2a64a3);
        }

        #ice {
            background: linear-gradient(45deg, #51c4e7, #41b4d6, #32a3c6);
        }

        #electric {
            background: linear-gradient(45deg, #eed535, #dcc222, #caa011);
        }

        #psychic {
            background: linear-gradient(45deg, #f366b9, #e455a8, #d24397);
        }

        #fairy {
            background: linear-gradient(45deg, #fdb9e9, #f9a6d9, #f494c9);
        }

        #ghost {
            background: linear-gradient(45deg, #7b62a3, #6a5293, #594383);
        }

        #ground {
            background: linear-gradient(45deg, #f7de3f, #e6cc2f, #d5b81f);
        }

        #poison {
            background: linear-gradient(45deg, #b97fc9, #a86fb9, #975fa9);
        }

        #normal {
            background: linear-gradient(45deg, #a4acaf, #939c9e, #828c8d);
        }

        #dragon {
            background: linear-gradient(45deg, goldenrod, #d2a631, #c19829);
        }

        #fighting {
            background: linear-gradient(45deg, #d56723, #c45520, #b3441d);
        }

        #rock {
            background: linear-gradient(45deg, #a38c21, #927c1d, #816c18);
        }

        footer {
            position: fixed;
            left: 0;
            bottom: 0;
            width: 100%;
            padding: 10px;
            text-align: center;
            padding: 10px;
            background: #FFD25C;
            color: #ff0000;
            font-family: cursive;
            box-shadow: -4px -4px 0 #000;
        }

        footer p {
            color: #000;
        }

        /*  */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .modal-content {
            background: linear-gradient(45deg, hsl(60, 20%, 98%), #8a8a8a, #191919);
            padding: 10px;
            border-radius: 10px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            position: relative;
            color: white;
        }

        .close {
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
            transition: opacity 0.3s ease;
            color: white;
            font-size: 2rem;

        }

        .modal-body img {
            max-width: 100px;
            margin-bottom: 15px;
        }

        .logo img {
            width: 200px;
        }

        header {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        @media (max-width: 768px) {
            body {
                background-color: #89CFF0;
                font-size: 16px;
                color: #000;
            }

            h1 {
                font-size: 40px;
                margin-top: 20px;
                margin-bottom: 10px;
            }

            .content-wrapper {
                margin: 10px;
            }

            .form-container {
                flex-direction: column;
                gap: 10px;
                margin: 10px;
                padding: 5px;
            }

            .form-container form {
                width: 100%;
            }

            #pokemon-search-input {
                width: calc(100% - 20px);
            }

            #pokedex {
                display: flex;
                flex-direction: column;
                align-items: center;
                padding: 20px;
                margin-top: 20px;
                color: #000;
            }

            .flip-card {
                margin: 10px;
                width: 90%;
                height: 350px;
                text-align: center;
                perspective: 1000px;
                opacity: 1;

            }


            .flip-card img {
                width: 150px;
                height: 150px;
                object-fit: cover;
            }

            footer {
                font-size: 12px;
                padding: 5px;
            }

            .modal-content {
                width: 90%;
                padding: 10px;
            }

            .front-poke-id,
            .back-poke-id {
                display: none;
            }
        }
    </style>

</head>

<body>
    <div class="content-wrapper">
        <header>
            <div class="logo">
                <img src="/Classwork/Pokemon-Cards/logo1.png" alt="GeeksterMon Logo" />
            </div>
        </header>
        <main>
            <div class="form-container">
                <form id="pokemon-type-filter">
                    <select name="type" class="type-filter" style="color: #000;">
                        <option value="">Types</option>
                    </select>
                    <input type="submit" value="Filter by Type" style="color: #000;" />
                    <button onClick="window.location.reload();" style="color: #000;">Reset</button>
                </form>
                <form id="pokemon-search-form" action="" method="GET">
                    <input id="pokemon-search-input" type="text" name="" placeholder="Enter Pokémon Name" />
                </form>
            </div>

            <section class="form-spacers"></section>
            <section id="pokedex"></section>
            <!--  -->
            <div id="pokemon-modal" class="modal" style="display: none;">
                <div class="modal-content">
                    <span id="close-modal" class="close">&times;</span>
                    <div id="modal-body">
                    </div>
                </div>
            </div>

            <!--  -->
            <footer>
                <p>2022 GeeksterMon. All rights reserved.</p>
            </footer>
        </main>
    </div>

    <script defer>
        const pokeTypeURL = 'https://pokeapi.co/api/v2/type/';
        const pokeQueryParams = new URLSearchParams(window.location.search);
        const typeParams = new URLSearchParams(window.location.search);
        const typeSearch = typeParams.get('type');

        const pokedex = document.getElementById('pokedex');
        const pokemonSearchForm = document.querySelector('#pokemon-search-form');
        const pokemonTypeFilter = document.querySelector('.type-filter');

        let pokemonArray = [];
        let uniqueTypes = new Set();

        const fetchPokemon = () => {
            const promises = [];
            for (let i = 1; i <= 151; i++) {
                const pokemonURL = `https://pokeapi.co/api/v2/pokemon/${i}`;
                promises.push(fetch(pokemonURL).then(response => response.json()));
            }

            Promise.all(promises)
                .then(allPokemon => {
                    const firstGenPokemon = allPokemon.map(pokemon => ({
                        frontImage: pokemon.sprites['front_default'], backImage: pokemon.sprites['back_default'],
                        pokemon_id: pokemon.id,
                        name: pokemon.name,
                        type: pokemon.types[0].type.name,
                        abilities: pokemon.abilities.map(ability => ability.ability.name).join(', '),
                        description: pokemon.species.url
                    }));
                    pokemonArray = firstGenPokemon;
                    createPokemonCards(firstGenPokemon);
                })
                .then(generateTypes);
        };

        fetchPokemon();

        pokemonSearchForm.addEventListener('input', (event) => {
            const filterPokemon = pokemonArray.filter(pokemon => pokemon.name.includes(event.target.value.toLowerCase()));
            clearPokedex();
            createPokemonCards(filterPokemon);
        });

        function clearPokedex() {
            pokedex.innerHTML = '';
        }

        function createPokemonCards(pokemons) {
            let currentPokemon = pokemons;
            if (typeSearch) {
                currentPokemon = pokemons.filter(pokemon => pokemon.type.includes(typeSearch.toLowerCase()));
            }
            currentPokemon.forEach(pokemon => {
                createPokemonCard(pokemon);
            });
        }

        function createPokemonCard(pokemon) {
            const flipCard = document.createElement("div");
            flipCard.classList.add("flip-card");
            flipCard.id = `${pokemon.name}`;
            pokedex.append(flipCard);

            const flipCardInner = document.createElement("div");
            flipCardInner.classList.add("flip-card-inner");
            flipCardInner.id = `${pokemon.type}`;
            flipCard.append(flipCardInner);

            const frontCard = document.createElement("div");
            frontCard.classList.add('front-pokemon-card');

            const frontImage = document.createElement('img');
            frontImage.src = `${pokemon.frontImage}`;
            frontImage.classList.add("front-pokemon-image");

            const frontPokeName = document.createElement('h2');
            frontPokeName.innerHTML = `<a href="/pokemon.html?pokemon_id=${pokemon.pokemon_id}">${pokemon.name.charAt(0).toUpperCase() + pokemon.name.slice(1)}</a>`;

            const frontPokeID = document.createElement('p');
            frontPokeID.textContent = `#${pokemon.pokemon_id}`;
            frontPokeID.classList.add("front-poke-id");

            const frontPokeType = document.createElement('p');
            frontPokeType.textContent = `${pokemon.type.toUpperCase()}`;
            frontPokeType.classList.add("front-pokemon-type");

            frontCard.append(frontImage, frontPokeID, frontPokeName, frontPokeType);

            const backCard = document.createElement("div");
            backCard.classList.add('back-pokemon-card');

            const backImage = document.createElement('img');
            backImage.src = `${pokemon.backImage}`;
            backImage.classList.add("back-pokemon-image");

            const backPokeID = document.createElement('p');
            backPokeID.textContent = `#${pokemon.pokemon_id}`;
            backPokeID.classList.add("back-poke-id");

            const backPokeName = document.createElement('h2');
            backPokeName.innerHTML = `<a href="/pokemon.html?pokemon_id=${pokemon.pokemon_id}">${pokemon.name.charAt(0).toUpperCase() + pokemon.name.slice(1)}</a>`;
            backPokeName.classList.add("back-pokemon-name");

            const backPokeAbilities = document.createElement("p");
            backPokeAbilities.innerHTML = `<p>Abilities:<br>${pokemon.abilities}<p>`;
            backPokeAbilities.classList.add("back-pokemon-abilities");

            backCard.append(backImage, backPokeID, backPokeName, backPokeAbilities);
            flipCardInner.append(frontCard, backCard);
            uniqueTypes.add(pokemon.type);
        }

        function generateTypes() {
            uniqueTypes.forEach(type => {
                const typeOption = document.createElement('option');
                typeOption.textContent = type.charAt(0).toUpperCase() + type.slice(1);
                typeOption.value = type;

                pokemonTypeFilter.append(typeOption);
            });
        }

        // Filter by type
        document.addEventListener('DOMContentLoaded', () => {
            const modal = document.getElementById('pokemon-modal');
            const modalBody = document.getElementById('modal-body');
            const closeModal = document.getElementById('close-modal');

            closeModal.addEventListener('click', () => {
                modal.style.display = 'none';
            });

            window.addEventListener('click', (event) => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });

            pokedex.addEventListener('click', (event) => {
                const card = event.target.closest('.flip-card');
                if (card) {
                    const pokemonName = card.id;
                    const pokemonData = pokemonArray.find(pokemon => pokemon.name === pokemonName);
                    if (pokemonData) {
                        populateModal(pokemonData);
                        modal.style.display = 'flex';
                    }
                }
            });

            function populateModal(pokemon) {
                const typeColor = getTypeGradient(pokemon.type);

                modalBody.innerHTML = `
            <div style="background: ${typeColor}; padding: 1px; border-radius: 5px; color: #000;">
                <h2>${pokemon.name.charAt(0).toUpperCase() + pokemon.name.slice(1)}</h2>
                <img src="${pokemon.frontImage}" alt="${pokemon.name}" />
                <p><strong>ID:</strong> #${pokemon.pokemon_id}</p>
                <p><strong>Type:</strong> ${pokemon.type.charAt(0).toUpperCase() + pokemon.type.slice(1)}</p>
                <p><strong>Abilities:</strong> ${pokemon.abilities}</p>
            </div>
        `;
            }

            function getTypeGradient(type) {
                const gradients = {
                    grass: 'linear-gradient(45deg, #9bcc50, #7bc950, #5bae2f)',
                    bug: 'linear-gradient(45deg, #729f3f, #6b9537, #577c2e)',
                    fire: 'linear-gradient(45deg, #fd7d24, #f45b20, #e44418)',
                    water: 'linear-gradient(45deg, #4592c4, #377bb3, #2a64a3)',
                    ice: 'linear-gradient(45deg, #51c4e7, #41b4d6, #32a3c6)',
                    electric: 'linear-gradient(45deg, #eed535, #dcc222, #caa011)',
                    psychic: 'linear-gradient(45deg, #f366b9, #e455a8, #d24397)',
                    fairy: 'linear-gradient(45deg, #fdb9e9, #f9a6d9, #f494c9)',
                    ghost: 'linear-gradient(45deg, #7b62a3, #6a5293, #594383)',
                    ground: 'linear-gradient(45deg, #f7de3f, #e6cc2f, #d5b81f)',
                    poison: 'linear-gradient(45deg, #b97fc9, #a86fb9, #975fa9)',
                    normal: 'linear-gradient(45deg, #a4acaf, #939c9e, #828c8d)',
                    dragon: 'linear-gradient(45deg, goldenrod, #d2a631, #c19829)',
                    fighting: 'linear-gradient(45deg, #d56723, #c45520, #b3441d)',
                    rock: 'linear-gradient(45deg, #a38c21, #927c1d, #816c18)',
                };

                return gradients[type] || 'linear-gradient(45deg, #a4acaf, #939c9e, #828c8d)'; // Default to 'normal' if type is missing
            }
        });

    </script>
</body>

</html>